import os
import requests
import threading
import time
import random
from telegram import Bot
from dotenv import load_dotenv

# ะะฐะณััะทะบะฐ ัะพะบะตะฝะฐ ะธ ID ะบะฐะฝะฐะปะฐ ะธะท .env
load_dotenv()
TOKEN = os.getenv("TELEGRAM_BOT_TOKEN")
CHANNEL_ID = os.getenv("TELEGRAM_CHANNEL_ID")
bot = Bot(token=TOKEN)

# --- KEEP ALIVE ะะะฏ ะะะะะะะ ---
def keep_alive():
    url = os.getenv("RENDER_EXTERNAL_URL")
    if not url:
        return
    while True:
        try:
            requests.get(url)
        except Exception:
            pass
        time.sleep(600)  # ะฟะธะฝะณ ะบะฐะถะดัะต 10 ะผะธะฝัั

threading.Thread(target=keep_alive, daemon=True).start()


# --- ะกะะะกะะ 100 ะะะขะะะะะะะกะะ ---
CAPTIONS = [
    "๐ ะญะปะตะบััะธัะบะฐ โ ัะปะพะฒะฐ ั ะฟัะธะฒะบััะพะผ ัะผััะปะฐ",
    "๐ญ ะะพะดัะผะฐะน ะพะฑ ััะพะผ. ะญะปะตะบััะธัะบะฐ ััะดะพะผ.",
    "๐ ะกะฟะพะบะพะนััะฒะธะต ะฟัะธัะพะดะธั ั ะฟะตัะฒะพะน ัััะพัะบะพะน",
    "๐ง ะ ะบะฐะถะดะพะผ ะทะฒัะบะต ะตััั ะผััะปั. ะญะปะตะบััะธัะบะฐ.",
    "๐ซ ะกะปััะฐะน ัะธัะธะฝั ะผะตะถะดั ัะปะพะฒะฐะผะธ",
    "๐ช ะะฝะพะณะดะฐ ะพััะฐะถะตะฝะธะต ัะตััะฝะตะต ะพัะธะณะธะฝะฐะปะฐ",
    "๐ ะัะตะปะตะฝะฝะฐั ะผะพะปัะธั, ะฝะพ ะญะปะตะบััะธัะบะฐ ะณะพะฒะพัะธั",
    "๐ค ะััะปะธ ะดะฒะธะถัััั ะฑััััะตะต ัะตะปัั",
    "โ ะฃััะพ ะฝะฐัะธะฝะฐะตััั ั ัะธะปะพัะพัะธะธ",
    "๐ฌ ะฆะธัะฐัะฐ ะดะฝั ะพั ะญะปะตะบััะธัะบะธ",
    "๐ ะกัะฐััะต ัะปะพะฒะฐ ะฒ ะฝะพะฒะพะผ ะฒะฐะณะพะฝะต",
    "๐ ะขะฒะพั ััะฐะฝัะธั โ ะพัะพะทะฝะฐะฝะฝะพััั",
    "๐ ะะฐะถะต ะฝะพััั ะผััะปะธ ะฝะต ัะฟัั",
    "๐ฅ ะะฝะพะณะดะฐ ะธัะบัะฐ โ ัะถะต ะฟะพะถะฐั",
    "๐งฉ ะััะปั ะฑะตะท ัะผััะปะฐ โ ััะพ ะฟะฐัะทะฐ",
    "โ๏ธ ะัะพััะฐั ะผะตัะฐะฝะธะบะฐ ัะปะพะถะฝัั ััะฒััะฒ",
    "๐ฐ ะะฐััะพััะตะต โ ััะพ ัะพะปัะบะพ ัะตะนัะฐั",
    "๐งโโ๏ธ ะะพะปัะฐะฝะธะต โ ัะพะถะต ะพัะฒะตั",
    "๐ชถ ะะตะณะบะพ โ ะฝะต ะทะฝะฐัะธั ะฟัััะพ",
    "๐ญ ะญะปะตะบััะธัะบะฐ โ ัะตะฐัั ะพะดะฝะพะน ะผััะปะธ",
    "๐ ะะพะฒะฐั ะณะปะฐะฒะฐ ะฑะตะท ะฝะฐัะฐะปะฐ ะธ ะบะพะฝัะฐ",
    "๐ซ ะััะปะธ ะฑะตะท ะฐะดัะตัะฐ",
    "๐ ะะฐะถะดะฐั ะพััะฐะฝะพะฒะบะฐ โ ะฝะพะฒะฐั ะผััะปั",
    "๐ง ะะฝะพะณะดะฐ ะดะพะถะดั โ ััะพ ะฟัะพััะพ ัะพะฝ",
    "๐ ะฃะปัะฑะฝะธัั ัะปััะฐะนะฝะพััะธ",
    "๐ง ะั ะดัะผะฐะตะผ, ะทะฝะฐัะธั โ ะถะธะฒัะผ",
    "๐ข ะััะปะธ ะฑะตะณัั ะฟะพ ัะตะปััะฐะผ ัะพะทะฝะฐะฝะธั",
    "๐ ะัะฝะฐ ะฝะฐะฑะปัะดะฐะตั ะทะฐ ัะตะบััะฐะผะธ",
    "๐ ะกะปััะฐะนะฝะพััั โ ะฒัะพัะฐั ัะพัะผะฐ ะผัะดัะพััะธ",
    "๐ณ ะะฝัััะธ โ ะฑะพะปััะต, ัะตะผ ัะฝะฐััะถะธ",
    "๐ฒ ะะฒะธะถะตะฝะธะต โ ััะพ ัะพะถะต ะพัะฒะตั",
    "๐ ะััะปั โ ะบะปัั, ะฝะพ ะทะฐะผะบะฐ ะฝะตั",
    "๐ก ะัะพััะฐั ะธะดะตั โ ัะปะพะถะฝะพะต ััะฒััะฒะพ",
    "๐ก ะญะปะตะบััะธัะบะฐ ะฝะฐ ะฒะพะปะฝะต ัะฒะพะตะณะพ ะฝะฐัััะพะตะฝะธั",
    "๐ท ะกะฝะธะผะพะบ ัะธัะธะฝั",
    "๐ ะัะบัะฐ ัะฐะทัะผะฐ ะผะตะถะดั ัััะพะบ",
    "๐ญ ะะฐะถะดะฐั ัะธัะฐัะฐ โ ะทะตัะบะฐะปะพ",
    "๐งญ ะะตะบัะพั ะฑะตะท ะบะพะพัะดะธะฝะฐั",
    "๐ ะัะดะพัะฝะธ ะฝะฐ ะพััะฐะฝะพะฒะบะต ะผััะปะตะน",
    "๐ ะะฐะฟะพะผะฝะธ ัะตะฑะต ะฟะพัะพะผ โ ัะตะนัะฐั",
    "๐ง ะะดะพัะฝะธ ะฝะตะผะฝะพะณะพ ัะผััะปะฐ",
    "๐ฒ ะกะปััะฐะนะฝะพััั โ ะฝะฐั ัะตะดะฐะบัะพั",
    "๐ ะัะพะบัััะธ ะดะตะฝั ะบะฐะบ ะบะฐััะตัั",
    "๐ก ะญะปะตะบััะธัะบะฐ ะฟะตัะตะดะฐัั ะฟัะธะฒะตั ัะพะทะฝะฐะฝะธั",
    "๐ ะััะปะธ ะฝะต ััะตะฑััั ัะฐะทัะตัะตะฝะธั",
    "โก ะะพัะพัะบะพ, ะฝะพ ะผะตัะบะพ",
    "๐ซง ะัะทััะธ ะผััะปะตะน ะฒ ะฟะพัะพะบะต ะดะฝั",
    "๐ฏ ะฆะตะปั โ ะฟัะพััะพ ะฑััั",
    "๐ถ ะะฐะถะดะพะต ัะปะพะฒะพ ะทะฒััะธั ะฒะฝัััะธ",
    "๐ฅ ะะธะทะฝั โ ััะพ ัะธัะฐัะฐ ะฑะตะท ะฐะฒัะพัะฐ",
    "๐ฌ ะะพะดะฟะธัะฐะฝะพ: ะญะปะตะบััะธัะบะฐ",
    "๐ ะะพัะพะบ ะผััะปะตะน ะฝะต ะพััะฐะฝะพะฒะธัั",
    "๐ ะััะฐะฝะพะฒะบะฐ: ะฒะดะพัะฝะพะฒะตะฝะธะต",
    "๐ค ะะตะปััั ัะพะทะฝะฐะฝะธั ะฟัะพะปะพะถะตะฝั ะดะฐะปััะต",
    "๐ฐ ะญะปะตะบััะธัะบะฐ ะฟัะธัะพะดะธั ะฒะพะฒัะตะผั",
    "๐ค ะัั ะฟัะพะนะดัั โ ะดะฐะถะต ััะฐ ะผััะปั",
    "๐งฉ ะะดะตะฐะปัะฝะพ ะฝะตัะพะฒะตััะตะฝะฝะพ",
    "๐ ะัะณะบะพ, ะบะฐะบ ะฒะตัะตั ะผะตะถะดั ัััะพะบ",
    "๐ ะะตัะฝะฐั ัะธัะฐัะฐ ะพ ะฒัะตะผะตะฝะฝะพะผ",
    "๐ช ะัั ะฝะฐัะธะฝะฐะตััั ั ะพััะฐะถะตะฝะธั",
    "๐ช ะัะบัะพะน ะดะฒะตัั, ะฐ ัะฐะผ โ ะผััะปั",
    "๐ ะญะปะตะบััะธัะบะฐ ะฒ ะฝะพัะธ ะฝะต ัะฟะธั",
    "๐ฌ ะะพะฟัะพั ะฑะตะท ะพัะฒะตัะฐ โ ะปัััะธะน ะพัะฒะตั",
    "๐ง ะัะพััะฐั ะธะดะตั โ ะบะฐะบ ัะปะพะถะฝะฐั ััะตะผะฐ",
    "๐ฏ ะกะฒะตั ััะฐะทั ะฒ ัะตะผะฝะพัะต ะปะตะฝัั",
    "๐ ะะดะต-ัะพ ะผะตะถะดั ัะธะปะพัะพัะธะตะน ะธ ัะผะพัะพะผ",
    "๐ก ะญะปะตะบััะธัะบะฐ ะปะพะฒะธั ัะธะณะฝะฐะป ะฒะดะพัะฝะพะฒะตะฝะธั",
    "๐ ะะฝะพะณะดะฐ ะผััะปั โ ะฟัะพััะพ ะบะปัั ะบ ะฟะฐัะทะต",
    "๐ช ะะธะณ, ะฟะพะนะผะฐะฝะฝัะน ะผะตะถะดั ัะปะพะฒะฐะผะธ",
    "๐ข ะัะพะฝะธั ะดะฒะธะถะตััั ะฑััััะตะต ัะผััะปะฐ",
    "๐ค ะััะปั ะฒััะปะฐ ะฟะพะบััะธัั",
    "๐ซ ะกะฐัะบะฐะทะผ ั ะพััะตะฝะบะพะผ ะดะพะฑัะพัั",
    "๐ณ ะัััะพัะฐ โ ัะพัะผะฐ ะณะปัะฑะธะฝั",
    "๐ญ ะกะตัััะทะฝะพ ะพ ะฝะตัะตัััะทะฝะพะผ",
    "๐ฌ ะญะปะตะบััะธัะบะฐ. ะะพัะพัะบะพ. ะฏัะฝะพ. ะ ัะพัะบั.",
    "๐ป ะะพะฑัะพะต ัััะพ, ัะธะปะพัะพั!",
    "๐ ะะพะฑัะพะน ะฝะพัะธ, ะผััะปะธัะตะปั.",
    "๐ก ะญะปะตะบััะธัะบะฐ ะฒ ััะธัะต 24/7",
    "๐ข ะะพะตะทะด ัะผะพัะธะน ะฑะตะท ัะพัะผะพะทะพะฒ",
    "๐ซ ะฃััะตะฝะฝัั ะดัะผะบะฐ ั ะผััะปัั ะฒะฝัััะธ",
    "๐ง ะะตะนัะพะธัะพะฝะธั ะฝะฐ ะผะฐะบัะธะผะฐะปะบะฐั",
    "๐ฒ ะะฐะฝะดะพะผะฝะพะต ะฟัะพัะฒะตัะปะตะฝะธะต",
    "๐งฉ ะัั ัะพะฒะฟะฐะดะฐะตั, ะตัะปะธ ะฝะต ะฒะณะปัะดัะฒะฐัััั",
    "๐ฐ ะะณะฝะพะฒะตะฝะธะต ั ะฟะพัะปะตะฒะบััะธะตะผ ัะผััะปะฐ",
    "๐ ะะดะตะผ ะดะฐะปััะต โ ัะปะพะฒ ะตัั ะผะฝะพะณะพ",
    "๐ ะัะบัั ััะฐะท ะฒ ัะตะผะฝะพัะต ะดะฝั",
    "๐ง ะััะปะตะฝะฝะพ ะณะดะต-ัะพ ะผะตะถะดั ะฟัะฝะบัะพะผ ะ ะธ ะ",
    "๐ ะะธะฝะธะผะฐะปะธะทะผ ะผััะปะตะน",
    "๐ง ะฆะธัะฐัะฐ ะทะฒััะธั ะปัััะต, ัะตะผ ะบะฐะถะตััั",
    "๐ก ะคัะฐะทะฐ, ะบะพัะพัะฐั ะผะพะณะปะฐ ะฑั ััะฐัั ะบะฝะธะณะพะน",
    "๐ค ะญะปะตะบััะธัะบะฐ ะฝะต ะพััะฐะฝะฐะฒะปะธะฒะฐะตััั",
    "๐ ะกะปะตะดัััะฐั ััะฐะฝัะธั โ ะธัะพะฝะธั",
    "๐ ะญะปะตะบััะธัะบะฐ ะฝะฐ ัะฒัะทะธ. ะะพะปัะฐ.",
    "๐ญ ะะดะธะฝ ะฟะพัั โ ััะพ ัะผััะปะพะฒ",
    "๐ ะคะธะปะพัะพัะธั ัะพ ัะบะพัะพัััั ัะฒะตัะฐ",
    "๐ญ ะัะพััะพ ะญะปะตะบััะธัะบะฐ. ะัะพััะพ ะผััะปั.",
    "๐ฏ ะะฐ ะณัะฐะฝะธ ัะฐัะบะฐะทะผะฐ ะธ ะผัะดัะพััะธ",
    "๐ก ะญัะธั ะฟัะพะดะพะปะถะฐะตััั...",
    "๐ ะกะปะพะฒะฐ. ะขะธัะธะฝะฐ. ะ ัะฝะพะฒะฐ ัะปะพะฒะฐ.",
    "๐ช ะขั ะฒ ะพััะฐะถะตะฝะธะธ ััะพะน ัะธัะฐัั?",
    "๐ฌ ะัะพะดะพะปะถะตะฝะธะต ัะปะตะดัะตั...",
]


# --- ะฆะะขะะขะซ + ะะะะะะะะะะะฏ ---
def get_quote():
    try:
        r = requests.get("https://zenquotes.io/api/random")
        data = r.json()[0]
        return f"{data['q']} โ {data['a']}"
    except Exception:
        return "๐ ะญะปะตะบััะธัะบะฐ: ัะธัะธะฝะฐ ัะพะถะต ะณะพะฒะพัะธั."

def get_image_url():
    return f"https://picsum.photos/seed/{random.randint(1,10000)}/800/600"


# --- ะะะขะะะะกะข ะะะะะซะ 3 ะงะะกะ ---
def auto_post():
    while True:
        quote = get_quote()
        image_url = get_image_url()
        signature = random.choice(CAPTIONS)
        caption = f"{quote}\n\n{signature}"
        try:
            bot.send_photo(chat_id=CHANNEL_ID, photo=image_url, caption=caption)
            print(f"[OK] ะัะฟัะฐะฒะปะตะฝะพ: {quote[:60]}...")
        except Exception as e:
            print(f"[ะัะธะฑะบะฐ ะพัะฟัะฐะฒะบะธ] {e}")
        time.sleep(3 * 60 * 60)  # ะบะฐะถะดัะต 3 ัะฐัะฐ


# --- ะะะะฃะกะ ---
if __name__ == "__main__":
    print("๐ ะญะปะตะบััะธัะบะฐ ะฒ ะฟััะธ โ ะฐะฒัะพะฟะพััะธะฝะณ ะบะฐะถะดัะต 3 ัะฐัะฐ...")
    auto_post()
